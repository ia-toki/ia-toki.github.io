<!DOCTYPE HTML>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="keywords" content="kompetisi, latihan, competitive programming, ngoding">
		<meta name="description" content="Dalam rangka memperingati Hari Sumpah Pemuda, Code4Nation dan IA TOKI berinisiatif mengadakan kegiatan Ngoding Seru. Ngoding Seru dilaksanakan untuk meramaikan Hackathon Merdeka dan bersama-sama mengajak masyarakat Indonesia untuk ngoding dan merasakan bahwa ngoding itu seru.">
		<meta property="og:site_name" content="Ngoding Seru">
		<meta property="og:title" content="Ngoding Seru">
		<meta property="og:url" content="http://ngoding.org">
		<meta property="og:description" content="Dalam rangka memperingati Hari Sumpah Pemuda, Code4Nation dan IA TOKI berinisiatif mengadakan kegiatan Ngoding Seru. Ngoding Seru dilaksanakan untuk meramaikan Hackathon Merdeka dan bersama-sama mengajak masyarakat Indonesia untuk ngoding dan merasakan bahwa ngoding itu seru.">
		<meta property="og:locale" content="en-US">
		<link rel="canonical" href="http://ngoding.org" itemprop="url">
		<title itemprop="name">Ngoding Seru</title>
		<link rel="shortcut icon" type="image/ico" href="images/favicon.ico">
		<script src="bower_components/jquery/dist/jquery.min.js"></script>
		<script src="bower_components/js-xlsx/dist/xlsx.min.js"></script>
		<script src="bower_components/d3/d3.min.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
		<link href="css/style.css" rel='stylesheet' type='text/css' />
	</head>
	<body id="scoreboard">
		<header>
			<h1 class="">Scoreboard Ngoding Seru Desember 2015 - Divisi Jagoan</h1>
		</header>
		<div id="rank"></div>

		<footer id="copyright">
			<small>&copy; Ikatan Alumni TOKI</small>
		</footer>

		<script>
			var createTable = function (data) {
				var dataHead = data[0];
				data.shift();
				var dataBody = data;

				var container = d3.select("#rank");

				var table = container.append("table");

				var thead = table.append("thead");

				var tbody = table.append("tbody");

				thead.append("tr")
					.selectAll("td")
					.data(dataHead).enter()
					.append("td")
					.text(function(d) {return d;})
					.each(function(d, i) {
						var td = d3.select(this);
						if(i == 0) {
							td.classed("no", true);
						} else if(i == 1) {
							td.classed("name", true);
						} else if(i == 2) {
							td.classed("score", true);
						} else {
							td.classed("score", true);
						}
					});

				var tr = tbody
					.selectAll("tr")
						.data(dataBody).enter()
						.append("tr");

				tr
					.selectAll("td")
						.data(function(d) {return d;}).enter()
						.append("td")
						.each(function(d, i) {
							var td = d3.select(this);
							if(i == 0) {
								td.classed("no", true);
								td.text(d);
							} else if(i == 1) {
								td.classed("name", true);
								td.append("div").classed("img", true).attr("style", "background-image:url('"+d[1]+"');");
								td.append("div").text(d[0]);
							} else if(i == 2) {
								td.classed("score", true);
								td.append("div").text((d[0] != 0)? d[0] : '-');
								td.append("div").text((d[1] != 0)? d[1] : '-');
							} else {
								td.classed("score", true);
								td.classed("wa", d[0] == 0 && d[1] != 0);
								td.classed("ac", d[0] == 1);
								td.classed("fac", d[0] == 2);
								td.append("div").text((d[1] != 0)? d[1] : '-');
								td.append("div").text((d[2] != 0)? d[2] : '-');
							}
						});
			};

			var simpleUrl = "http://ngodingscoreboard.kilatiron.net/";

			var fetchScoreboard = function() {
				$.get(simpleUrl, function(response) {
					var simpleData = response;
					createTable(simpleData);
				});
			}

			fetchScoreboard();
			window.setInterval(fetchScoreboard, 10*1000);
		</script>
	</body>
</html>
